==================
WARNING: ThreadSanitizer: lock-order-inversion (potential deadlock) (pid=216757)
  Cycle in lock order graph: M0 (0x7b2800000000) => M1 (0x7b2800000028) => M2 (0x7b2800000050) => M3 (0x7b2800000078) => M0

  Mutex M1 acquired here while holding mutex M0 in thread T1:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:30:5 (philo+0x4bb88d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

    Hint: use TSAN_OPTIONS=second_deadlock_stack=1 to get more informative warning message

  Mutex M2 acquired here while holding mutex M1 in thread T2:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:30:5 (philo+0x4bb88d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Mutex M3 acquired here while holding mutex M2 in thread T3:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:30:5 (philo+0x4bb88d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Mutex M0 acquired here while holding mutex M3 in thread T4:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:30:5 (philo+0x4bb88d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Thread T1 (tid=216759, running) created by main thread at:
    #0 pthread_create <null> (philo+0x449c3b)
    #1 ft_create_philos /nfs/homes/aakouhar/Desktop/last_philo/philo.c:37:13 (philo+0x4ba2ab)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:101:9 (philo+0x4ba770)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Thread T2 (tid=216760, running) created by main thread at:
    #0 pthread_create <null> (philo+0x449c3b)
    #1 ft_create_philos /nfs/homes/aakouhar/Desktop/last_philo/philo.c:37:13 (philo+0x4ba2ab)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:101:9 (philo+0x4ba770)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Thread T3 (tid=216761, running) created by main thread at:
    #0 pthread_create <null> (philo+0x449c3b)
    #1 ft_create_philos /nfs/homes/aakouhar/Desktop/last_philo/philo.c:37:13 (philo+0x4ba2ab)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:101:9 (philo+0x4ba770)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Thread T4 (tid=216762, running) created by main thread at:
    #0 pthread_create <null> (philo+0x449c3b)
    #1 ft_create_philos /nfs/homes/aakouhar/Desktop/last_philo/philo.c:37:13 (philo+0x4ba2ab)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:101:9 (philo+0x4ba770)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: lock-order-inversion (potential deadlock) (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x4679e6) in pthread_mutex_lock
==================
==================
WARNING: ThreadSanitizer: destroy of a locked mutex (pid=216757)
    #0 pthread_mutex_destroy <null> (philo+0x44b5e6)
    #1 ft_free_all /nfs/homes/aakouhar/Desktop/last_philo/ft_free.c:23:9 (philo+0x4bbf3f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:103:9 (philo+0x4ba782)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  and:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:30:5 (philo+0x4bb88d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Location is heap block of size 160 at 0x7b2800000000 allocated by main thread:
    #0 malloc <null> (philo+0x44840b)
    #1 ft_alloc /nfs/homes/aakouhar/Desktop/last_philo/philo.c:79:19 (philo+0x4ba61f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:92:9 (philo+0x4ba6ee)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Mutex M0 (0x7b2800000000) created at:
    #0 pthread_mutex_init <null> (philo+0x44b46d)
    #1 ft_create_forks /nfs/homes/aakouhar/Desktop/last_philo/philo2.c:21:13 (philo+0x4ba87c)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:94:9 (philo+0x4ba70c)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: destroy of a locked mutex (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x44b5e6) in pthread_mutex_destroy
==================
==================
WARNING: ThreadSanitizer: destroy of a locked mutex (pid=216757)
    #0 pthread_mutex_destroy <null> (philo+0x44b5e6)
    #1 ft_free_all /nfs/homes/aakouhar/Desktop/last_philo/ft_free.c:23:9 (philo+0x4bbf3f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:103:9 (philo+0x4ba782)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  and:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:17:5 (philo+0x4bb71d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Location is heap block of size 160 at 0x7b2800000000 allocated by main thread:
    #0 malloc <null> (philo+0x44840b)
    #1 ft_alloc /nfs/homes/aakouhar/Desktop/last_philo/philo.c:79:19 (philo+0x4ba61f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:92:9 (philo+0x4ba6ee)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Mutex M1 (0x7b2800000028) created at:
    #0 pthread_mutex_init <null> (philo+0x44b46d)
    #1 ft_create_forks /nfs/homes/aakouhar/Desktop/last_philo/philo2.c:21:13 (philo+0x4ba87c)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:94:9 (philo+0x4ba70c)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: destroy of a locked mutex (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x44b5e6) in pthread_mutex_destroy
==================
==================
WARNING: ThreadSanitizer: destroy of a locked mutex (pid=216757)
    #0 pthread_mutex_destroy <null> (philo+0x44b5e6)
    #1 ft_free_all /nfs/homes/aakouhar/Desktop/last_philo/ft_free.c:23:9 (philo+0x4bbf3f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:103:9 (philo+0x4ba782)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  and:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:30:5 (philo+0x4bb88d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Location is heap block of size 160 at 0x7b2800000000 allocated by main thread:
    #0 malloc <null> (philo+0x44840b)
    #1 ft_alloc /nfs/homes/aakouhar/Desktop/last_philo/philo.c:79:19 (philo+0x4ba61f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:92:9 (philo+0x4ba6ee)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Mutex M2 (0x7b2800000050) created at:
    #0 pthread_mutex_init <null> (philo+0x44b46d)
    #1 ft_create_forks /nfs/homes/aakouhar/Desktop/last_philo/philo2.c:21:13 (philo+0x4ba87c)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:94:9 (philo+0x4ba70c)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: destroy of a locked mutex (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x44b5e6) in pthread_mutex_destroy
==================
==================
WARNING: ThreadSanitizer: destroy of a locked mutex (pid=216757)
    #0 pthread_mutex_destroy <null> (philo+0x44b5e6)
    #1 ft_free_all /nfs/homes/aakouhar/Desktop/last_philo/ft_free.c:23:9 (philo+0x4bbf3f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:103:9 (philo+0x4ba782)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  and:
    #0 pthread_mutex_lock <null> (philo+0x4679e6)
    #1 take_a_fork /nfs/homes/aakouhar/Desktop/last_philo/actions.c:17:5 (philo+0x4bb71d)
    #2 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:37:9 (philo+0x4bb8e8)
    #3 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Location is heap block of size 160 at 0x7b2800000000 allocated by main thread:
    #0 malloc <null> (philo+0x44840b)
    #1 ft_alloc /nfs/homes/aakouhar/Desktop/last_philo/philo.c:79:19 (philo+0x4ba61f)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:92:9 (philo+0x4ba6ee)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Mutex M3 (0x7b2800000078) created at:
    #0 pthread_mutex_init <null> (philo+0x44b46d)
    #1 ft_create_forks /nfs/homes/aakouhar/Desktop/last_philo/philo2.c:21:13 (philo+0x4ba87c)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:94:9 (philo+0x4ba70c)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: destroy of a locked mutex (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x44b5e6) in pthread_mutex_destroy
==================
==================
WARNING: ThreadSanitizer: data race (pid=216757)
  Write of size 8 at 0x7b5000000068 by main thread:
    #0 free <null> (philo+0x448a28)
    #1 ft_free_all /nfs/homes/aakouhar/Desktop/last_philo/ft_free.c:24:5 (philo+0x4bbf5d)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:103:9 (philo+0x4ba782)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Previous read of size 8 at 0x7b5000000068 by thread T1:
    #0 ft_sleeping /nfs/homes/aakouhar/Desktop/last_philo/actions.c:58:22 (philo+0x4bbb1e)
    #1 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:30:9 (philo+0x4bad8e)

  Thread T1 (tid=216759, running) created by main thread at:
    #0 pthread_create <null> (philo+0x449c3b)
    #1 ft_create_philos /nfs/homes/aakouhar/Desktop/last_philo/philo.c:37:13 (philo+0x4ba2ab)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:101:9 (philo+0x4ba770)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: data race (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x448a28) in free
==================
==================
WARNING: ThreadSanitizer: data race (pid=216757)
  Write of size 8 at 0x7b50000000e0 by main thread:
    #0 free <null> (philo+0x448a28)
    #1 ft_free_all /nfs/homes/aakouhar/Desktop/last_philo/ft_free.c:24:5 (philo+0x4bbf5d)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:103:9 (philo+0x4ba782)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

  Previous read of size 8 at 0x7b50000000e0 by thread T2 (mutexes: write M416886705618984, write M698361682329680):
    #0 ft_eating /nfs/homes/aakouhar/Desktop/last_philo/actions.c:48:22 (philo+0x4bba47)
    #1 routine /nfs/homes/aakouhar/Desktop/last_philo/routine.c:26:13 (philo+0x4bad60)

  Mutex M416886705618984 is already destroyed.

  Mutex M698361682329680 is already destroyed.

  Thread T2 (tid=216760, running) created by main thread at:
    #0 pthread_create <null> (philo+0x449c3b)
    #1 ft_create_philos /nfs/homes/aakouhar/Desktop/last_philo/philo.c:37:13 (philo+0x4ba2ab)
    #2 ft_init /nfs/homes/aakouhar/Desktop/last_philo/philo.c:101:9 (philo+0x4ba770)
    #3 main /nfs/homes/aakouhar/Desktop/last_philo/main.c:21:9 (philo+0x4b9b2c)

SUMMARY: ThreadSanitizer: data race (/nfs/homes/aakouhar/Desktop/last_philo/philo+0x448a28) in free
==================
philo: tpp.c:83: __pthread_tpp_change_priority: Assertion `new_prio == -1 || (new_prio >= fifo_min_prio && new_prio <= fifo_max_prio)' failed.
